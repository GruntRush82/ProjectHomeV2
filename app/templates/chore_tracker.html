{% extends "base.html" %}

{% block title %}Chores â€” Felker Family Hub{% endblock %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Chores</h1>
</div>

<!-- ======================== CHORES ======================== -->
<div id="tab-chores">

    <!-- Create User Form -->
    <section>
        <h2>Create User</h2>
        <form id="create-user-form">
            <input type="text" id="username-input" placeholder="Enter a username" required>
            <button type="submit">Create User</button>
        </form>
    </section>

    <!-- Add Chore Form -->
    <section>
        <h2>Add a Chore</h2>
        <form id="add-chore-form">
            <input type="text" id="chore-input" placeholder="Enter a new chore" required>

            <select id="user-select" required>
                <option value="" disabled selected>Select User</option>
            </select>

            <select id="day-select" required>
                <option value="" disabled selected>Select Day</option>
                <option>Monday</option>
                <option>Tuesday</option>
                <option>Wednesday</option>
                <option>Thursday</option>
                <option>Friday</option>
                <option>Saturday</option>
                <option>Sunday</option>
            </select>

            <select id="rotation-select" required>
                <option value="" disabled selected>Rotation Type</option>
                <option value="static">Static</option>
                <option value="rotating">Rotating</option>
            </select>

            <button type="submit">Add Chore</button>
        </form>
    </section>

    <div id="rotation-setup" class="rotation-ui" style="display: none;">
        <h3>Assign Rotating Chore</h3>
        <label>Add additional users to rotation:</label>
        <select id="rotation-user-select">
            <option value="" disabled selected>Select user</option>
        </select>
        <button id="add-user-btn">Add</button>
        <div id="rotation-list-container" style="display: none;">
            <div id="rotation-pinned-user" class="rotation-user pinned"></div>
            <div id="rotation-list"></div>
        </div>
    </div>

    <!-- Chore Grid Container -->
    <section>
        <h2>Weekly Chore Grid</h2>
        <button id="reset-week-btn" style="max-width:180px;margin-bottom:10px;">
            Reset Week
        </button>

        <div id="chore-list">
            <!-- JavaScript will dynamically insert each user's row here -->
        </div>
    </section>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/scripts.js') }}?v=2.1.1"></script>
<!-- celebratory audio -->
<audio id="cheer-sound" src="{{ url_for('static', filename='sounds/cheer.wav') }}" preload="auto" playsinline></audio>
{% endblock %}
